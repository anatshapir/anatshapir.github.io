<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>××“×¨×™×š ×œ×—×©×™×‘×” ×¨×§×•×¨×¡×™×‘×™×ª - ××™×š ×¤×•×ª×¨×™× ×‘×¢×™×” ×¨×§×•×¨×¡×™×‘×™×ª</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.2em;
        }
        
        .problem-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .problem-btn {
            padding: 12px 25px;
            background: linear-gradient(135deg, #f1f3f5 0%, #e9ecef 100%);
            color: #495057;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1em;
            font-weight: bold;
        }
        
        .problem-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .problem-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }
        
        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
            position: relative;
            padding: 0 20px;
        }
        
        .step-indicator::before {
            content: '';
            position: absolute;
            top: 25px;
            right: 50px;
            left: 50px;
            height: 3px;
            background: #e9ecef;
            z-index: 1;
        }
        
        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
        }
        
        .step-circle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #e9ecef;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.3em;
            color: #868e96;
            transition: all 0.3s;
            margin-bottom: 10px;
        }
        
        .step.active .step-circle {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: scale(1.2);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .step.completed .step-circle {
            background: linear-gradient(135deg, #51cf66 0%, #37b24d 100%);
            color: white;
        }
        
        .step-label {
            text-align: center;
            font-size: 0.9em;
            color: #495057;
            max-width: 120px;
        }
        
        .step.active .step-label {
            font-weight: bold;
            color: #667eea;
        }
        
        .content-area {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            min-height: 400px;
            margin-bottom: 30px;
        }
        
        .step-content {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }
        
        .step-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .step-title {
            color: #667eea;
            font-size: 1.8em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .explanation-box {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-right: 4px solid #667eea;
        }
        
        .hint-box {
            background: #fff3cd;
            border-right: 4px solid #ffd43b;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .hint-title {
            font-weight: bold;
            color: #fab005;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .example-box {
            background: #e7f5ff;
            border-right: 4px solid #339af0;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .example-title {
            font-weight: bold;
            color: #1c7ed6;
            margin-bottom: 15px;
            font-size: 1.2em;
        }
        
        .code-block {
            background: #282c34;
            color: #abb2bf;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            line-height: 1.6;
            direction: ltr;
            text-align: left;
            overflow-x: auto;
            margin: 15px 0;
            white-space: pre-line;  /* Allow line breaks */
        }
        
        .code-line {
            display: block;
            white-space: pre;  /* Preserve spaces */
        }
        
        .code-line:hover {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .keyword { color: #c678dd; }
        .function { color: #61afef; }
        .number { color: #d19a66; }
        .string { color: #98c379; }
        .comment { color: #5c6370; font-style: italic; }
        .parameter { color: #e06c75; }
        
        .interactive-area {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .question {
            font-size: 1.1em;
            color: #495057;
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .option {
            padding: 15px;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .option:hover {
            background: #e9ecef;
            border-color: #667eea;
        }
        
        .option.selected {
            background: #e7f5ff;
            border-color: #339af0;
        }
        
        .option.correct {
            background: #d3f9d8;
            border-color: #51cf66;
        }
        
        .option.incorrect {
            background: #ffe3e3;
            border-color: #ff6b6b;
        }
        
        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            display: none;
        }
        
        .feedback.show {
            display: block;
        }
        
        .feedback.correct {
            background: #d3f9d8;
            color: #2b8a3e;
        }
        
        .feedback.incorrect {
            background: #ffe3e3;
            color: #c92a2a;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        button {
            padding: 12px 30px;
            font-size: 1.1em;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .btn-prev {
            background: linear-gradient(135deg, #868e96 0%, #495057 100%);
            color: white;
        }
        
        .btn-next {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .tree-diagram {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }
        
        .tree-node {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0 10px;
        }
        
        .node-box {
            background: white;
            border: 2px solid #667eea;
            padding: 10px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-weight: bold;
            position: relative;
        }
        
        .node-children {
            display: flex;
            gap: 20px;
        }
        
        .node-box::after {
            content: '';
            position: absolute;
            bottom: -20px;
            right: 50%;
            width: 2px;
            height: 20px;
            background: #667eea;
        }
        
        .arrow-down {
            font-size: 20px;
            color: #667eea;
            margin: 10px 0;
        }
        
        .pattern-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .pattern-table th,
        .pattern-table td {
            border: 1px solid #dee2e6;
            padding: 12px;
            text-align: center;
        }
        
        .pattern-table th {
            background: #667eea;
            color: white;
        }
        
        .pattern-table tr:nth-child(even) {
            background: #f8f9fa;
        }
        
        .highlight-cell {
            background: #fff3cd !important;
            font-weight: bold;
        }
        
        .formula-display {
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.3em;
            font-weight: bold;
            color: #374151;
            margin: 20px 0;
            border: 2px solid #d1d5db;
            direction: ltr;  /* Force LTR for formulas */
        }
        
        .math-content {
            direction: ltr;
            display: inline-block;
        }
        
        /* Ensure tables with numbers display correctly */
        .pattern-table td {
            direction: ltr;
            text-align: center;
        }
        
        .pattern-table td.highlight-cell {
            direction: rtl;  /* Hebrew text in highlighted cells */
        }
        
        .success-message {
            background: linear-gradient(135deg, #51cf66 0%, #37b24d 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            font-size: 1.3em;
            display: none;
            margin: 20px 0;
        }
        
        .success-message.show {
            display: block;
            animation: celebrate 0.5s ease-out;
        }
        
        @keyframes celebrate {
            0% {
                transform: scale(0.8);
                opacity: 0;
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        .input-area {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            align-items: center;
        }
        
        .input-field {
            padding: 10px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 1.1em;
            flex: 1;
        }
        
        .check-btn {
            padding: 10px 20px;
            background: linear-gradient(135deg, #339af0 0%, #1c7ed6 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .check-btn:hover {
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¯ ××“×¨×™×š ×œ×—×©×™×‘×” ×¨×§×•×¨×¡×™×‘×™×ª</h1>
        <p class="subtitle">×œ×•××“×™× ××™×š ×œ×¤×ª×•×¨ ×‘×¢×™×” ×¨×§×•×¨×¡×™×‘×™×ª ×¦×¢×“ ××—×¨ ×¦×¢×“</p>
        
        <div class="problem-selector">
            <button class="problem-btn active" onclick="selectProblem('factorial')">×—×™×©×•×‘ ×¢×¦×¨×ª</button>
            <button class="problem-btn" onclick="selectProblem('power')">×—×–×§×”</button>
            <button class="problem-btn" onclick="selectProblem('palindrome')">×‘×“×™×§×ª ×¤×œ×™× ×“×¨×•×</button>
            <button class="problem-btn" onclick="selectProblem('countDigits')">×¡×¤×™×¨×ª ×¡×¤×¨×•×ª</button>
            <button class="problem-btn" onclick="selectProblem('reverseString')">×”×™×¤×•×š ××—×¨×•×–×ª</button>
        </div>
        
        <div class="step-indicator">
            <div class="step active" id="step1">
                <div class="step-circle">1</div>
                <div class="step-label">×”×‘× ×ª ×”×‘×¢×™×”</div>
            </div>
            <div class="step" id="step2">
                <div class="step-circle">2</div>
                <div class="step-label">××¦×™××ª ×“×¤×•×¡</div>
            </div>
            <div class="step" id="step3">
                <div class="step-circle">3</div>
                <div class="step-label">×ª× ××™ ×¢×¦×™×¨×”</div>
            </div>
            <div class="step" id="step4">
                <div class="step-circle">4</div>
                <div class="step-label">×”×§×©×¨ ×”×¨×§×•×¨×¡×™×‘×™</div>
            </div>
            <div class="step" id="step5">
                <div class="step-circle">5</div>
                <div class="step-label">×›×ª×™×‘×ª ×”×§×•×“</div>
            </div>
            <div class="step" id="step6">
                <div class="step-circle">6</div>
                <div class="step-label">×‘×“×™×§×”</div>
            </div>
        </div>
        
        <div class="content-area">
            <!-- Step 1: Understanding the Problem -->
            <div class="step-content active" id="content1">
                <div class="step-title">
                    <span>ğŸ“š</span>
                    <span>×©×œ×‘ 1: ×”×‘× ×ª ×”×‘×¢×™×”</span>
                </div>
                
                <div class="explanation-box">
                    <div id="problemDescription">
                        <!-- Problem description will be inserted here -->
                    </div>
                </div>
                
                <div class="example-box">
                    <div class="example-title">×“×•×’×××•×ª:</div>
                    <div id="problemExamples">
                        <!-- Examples will be inserted here -->
                    </div>
                </div>
                
                <div class="hint-box">
                    <div class="hint-title">ğŸ’¡ ×˜×™×¤ ×—×©×•×‘:</div>
                    <div>×œ×¤× ×™ ×©×××©×™×›×™×, ×•×•×“××• ×©××ª× ××‘×™× ×™× ×œ×’××¨×™ ××” ×”×¤×•× ×§×¦×™×” ×¦×¨×™×›×” ×œ×¢×©×•×ª!</div>
                </div>
                
                <div class="interactive-area">
                    <div class="question">×”×× ×”×‘× ×ª ××ª ×”×‘×¢×™×”?</div>
                    <div class="options">
                        <div class="option" onclick="confirmUnderstanding(true)">
                            âœ… ×›×Ÿ, ×‘×¨×•×¨ ×œ×™ ××” ×¦×¨×™×š ×œ×¢×©×•×ª
                        </div>
                        <div class="option" onclick="confirmUnderstanding(false)">
                            â“ ×œ×, ×× ×™ ×¦×¨×™×š/×” ×¢×•×“ ×”×¡×‘×¨
                        </div>
                    </div>
                    <div class="feedback" id="understandingFeedback"></div>
                </div>
            </div>
            
            <!-- Step 2: Finding Pattern -->
            <div class="step-content" id="content2">
                <div class="step-title">
                    <span>ğŸ”</span>
                    <span>×©×œ×‘ 2: ××¦×™××ª ×”×“×¤×•×¡</span>
                </div>
                
                <div class="explanation-box">
                    <h3>× ×—×¤×© ×“×¤×•×¡ - ××™×š ×‘×¢×™×” ×’×“×•×œ×” ××ª×—×œ×§×ª ×œ×‘×¢×™×•×ª ×§×˜× ×•×ª?</h3>
                    <div id="patternExplanation">
                        <!-- Pattern explanation will be inserted here -->
                    </div>
                </div>
                
                <div class="pattern-table" id="patternTable">
                    <!-- Pattern table will be inserted here -->
                </div>
                
                <div class="hint-box">
                    <div class="hint-title">ğŸ’¡ ×”×©××œ×” ×”××¨×›×–×™×ª:</div>
                    <div id="patternHint">
                        <!-- Pattern hint will be inserted here -->
                    </div>
                </div>
                
                <div class="interactive-area">
                    <div class="question" id="patternQuestion">
                        <!-- Pattern question will be inserted here -->
                    </div>
                    <div class="options" id="patternOptions">
                        <!-- Pattern options will be inserted here -->
                    </div>
                    <div class="feedback" id="patternFeedback"></div>
                </div>
            </div>
            
            <!-- Step 3: Base Case -->
            <div class="step-content" id="content3">
                <div class="step-title">
                    <span>ğŸ›‘</span>
                    <span>×©×œ×‘ 3: ×ª× ××™ ×”×¢×¦×™×¨×” (Base Case)</span>
                </div>
                
                <div class="explanation-box">
                    <h3>××ª×™ ×”×¨×§×•×¨×¡×™×” × ×¢×¦×¨×ª?</h3>
                    <p>×ª× ××™ ×”×¢×¦×™×¨×” ×”×•× ×”××§×¨×” ×”×¤×©×•×˜ ×‘×™×•×ª×¨ ×©×× ×—× ×• ×™×•×“×¢×™× ×œ×¤×ª×•×¨ ×™×©×™×¨×•×ª, ×‘×œ×™ ×¨×§×•×¨×¡×™×”.</p>
                </div>
                
                <div class="example-box">
                    <div class="example-title">×—×©×‘×•: ××” ×”××§×¨×” ×”×›×™ ×¤×©×•×˜?</div>
                    <div id="baseCaseHint">
                        <!-- Base case hint will be inserted here -->
                    </div>
                </div>
                
                <div class="hint-box">
                    <div class="hint-title">âš ï¸ ×—×©×•×‘ ×××•×“:</div>
                    <div>×‘×œ×™ ×ª× ××™ ×¢×¦×™×¨×” × ×›×•×Ÿ, ×”×¨×§×•×¨×¡×™×” ×ª××©×™×š ×œ× ×¦×—!</div>
                </div>
                
                <div class="interactive-area">
                    <div class="question" id="baseCaseQuestion">
                        <!-- Base case question will be inserted here -->
                    </div>
                    <div class="input-area">
                        <input type="text" class="input-field" id="baseCaseInput" placeholder="×”×§×œ×“ ××ª ×”×ª×©×•×‘×” ×©×œ×š...">
                        <button class="check-btn" onclick="checkBaseCase()">×‘×“×•×§</button>
                    </div>
                    <div class="feedback" id="baseCaseFeedback"></div>
                </div>
            </div>
            
            <!-- Step 4: Recursive Relation -->
            <div class="step-content" id="content4">
                <div class="step-title">
                    <span>ğŸ”—</span>
                    <span>×©×œ×‘ 4: ×”×§×©×¨ ×”×¨×§×•×¨×¡×™×‘×™</span>
                </div>
                
                <div class="explanation-box">
                    <h3>××™×š ××—×‘×¨×™× ××ª ×”×ª×•×¦××” ×©×œ ×”×‘×¢×™×” ×”×§×˜× ×” ×œ×‘×¢×™×” ×”×’×“×•×œ×”?</h3>
                    <div id="recursiveRelation">
                        <!-- Recursive relation will be inserted here -->
                    </div>
                </div>
                
                <div class="tree-diagram" id="treeDiagram">
                    <!-- Tree diagram will be inserted here -->
                </div>
                
                <div class="formula-display" id="formulaDisplay">
                    <!-- Formula will be inserted here -->
                </div>
                
                <div class="hint-box">
                    <div class="hint-title">ğŸ’¡ ×”×›×œ×œ:</div>
                    <div id="recursiveHint">
                        <!-- Recursive hint will be inserted here -->
                    </div>
                </div>
                
                <div class="interactive-area">
                    <div class="question" id="recursiveQuestion">
                        <!-- Recursive question will be inserted here -->
                    </div>
                    <div class="options" id="recursiveOptions">
                        <!-- Recursive options will be inserted here -->
                    </div>
                    <div class="feedback" id="recursiveFeedback"></div>
                </div>
            </div>
            
            <!-- Step 5: Writing Code -->
            <div class="step-content" id="content5">
                <div class="step-title">
                    <span>ğŸ’»</span>
                    <span>×©×œ×‘ 5: ×›×ª×™×‘×ª ×”×§×•×“</span>
                </div>
                
                <div class="explanation-box">
                    <h3>×¢×›×©×™×• × ×¨×›×™×‘ ××ª ×”×›×œ ×™×—×“!</h3>
                    <p>× ×›×ª×•×‘ ××ª ×”×¤×•× ×§×¦×™×” ×”×¨×§×•×¨×¡×™×‘×™×ª ×”××œ××”:</p>
                </div>
                
                <div class="code-block" id="finalCode">
                    <!-- Final code will be inserted here -->
                </div>
                
                <div class="example-box">
                    <div class="example-title">×”×¡×‘×¨ ×”×§×•×“:</div>
                    <div id="codeExplanation">
                        <!-- Code explanation will be inserted here -->
                    </div>
                </div>
                
                <div class="hint-box">
                    <div class="hint-title">ğŸ“ ××‘× ×” ×›×œ×œ×™ ×©×œ ×¤×•× ×§×¦×™×” ×¨×§×•×¨×¡×™×‘×™×ª:</div>
                    <div>
                        1. ×‘×“×™×§×ª ×ª× ××™ ×¢×¦×™×¨×” - ×× ×›×Ÿ, ×”×—×–×¨ ×¢×¨×š<br>
                        2. ×—×™×©×•×‘ ×¨×§×•×¨×¡×™×‘×™ - ×§×¨× ×œ×¤×•× ×§×¦×™×” ×¢× ×§×œ×˜ ×§×˜×Ÿ ×™×•×ª×¨<br>
                        3. ×©×œ×‘ ××ª ×”×ª×•×¦××” ×•×”×—×–×¨
                    </div>
                </div>
            </div>
            
            <!-- Step 6: Testing -->
            <div class="step-content" id="content6">
                <div class="step-title">
                    <span>âœ…</span>
                    <span>×©×œ×‘ 6: ×‘×“×™×§×ª ×”×¤×ª×¨×•×Ÿ</span>
                </div>
                
                <div class="explanation-box">
                    <h3>×‘×•××• × ×‘×“×•×§ ×©×”×¤×ª×¨×•×Ÿ ×¢×•×‘×“!</h3>
                    <p>× ×¢×§×•×‘ ××—×¨×™ ×”×¨×¦×” ×©×œ ×”×¤×•× ×§×¦×™×” ×¢× ×“×•×’××”:</p>
                </div>
                
                <div id="testTrace">
                    <!-- Test trace will be inserted here -->
                </div>
                
                <div class="success-message" id="successMessage">
                    ğŸ‰ ××¦×•×™×Ÿ! ×”×‘× ×ª ××™×š ×œ×¤×ª×•×¨ ×‘×¢×™×” ×¨×§×•×¨×¡×™×‘×™×ª!
                </div>
                
                <div class="interactive-area">
                    <div class="question">× ×¡×” ×œ×—×–×•×ª: ××” ×™×”×™×” ×”×¤×œ×˜ ×¢×‘×•×¨ ×§×œ×˜ ××—×¨?</div>
                    <div id="testQuestion">
                        <!-- Test question will be inserted here -->
                    </div>
                    <div class="input-area">
                        <input type="text" class="input-field" id="testInput" placeholder="×”×§×œ×“ ××ª ×”×ª×©×•×‘×”...">
                        <button class="check-btn" onclick="checkTest()">×‘×“×•×§</button>
                    </div>
                    <div class="feedback" id="testFeedback"></div>
                </div>
            </div>
        </div>
        
        <div class="navigation">
            <button class="btn-prev" onclick="previousStep()" id="prevBtn" disabled>
                â† ×”×§×•×“×
            </button>
            <button class="btn-next" onclick="nextStep()" id="nextBtn">
                ×”×‘× â†’
            </button>
        </div>
    </div>
    
    <script>
        // Problem definitions
        const problems = {
            factorial: {
                name: '×—×™×©×•×‘ ×¢×¦×¨×ª',
                description: '×¢×¦×¨×ª ×©×œ ××¡×¤×¨ n (××¡×•×× ×ª n!) ×”×™× ××›×¤×œ×ª ×›×œ ×”××¡×¤×¨×™× ×-1 ×¢×“ n.',
                examples: [
                    '<span dir="ltr">5! = 5 Ã— 4 Ã— 3 Ã— 2 Ã— 1 = 120</span>',
                    '<span dir="ltr">4! = 4 Ã— 3 Ã— 2 Ã— 1 = 24</span>',
                    '<span dir="ltr">3! = 3 Ã— 2 Ã— 1 = 6</span>',
                    '<span dir="ltr">1! = 1</span>',
                    '<span dir="ltr">0! = 1</span> (×”×’×“×¨×”)'
                ],
                pattern: 'n! = n Ã— (n-1)!',
                patternTable: `
                    <table class="pattern-table">
                        <tr><th>n</th><th>!n</th><th>××™×š ××—×©×‘×™×?</th></tr>
                        <tr><td>5</td><td>120</td><td><span class="math-content">5 Ã— 4!</span></td></tr>
                        <tr><td>4</td><td>24</td><td><span class="math-content">4 Ã— 3!</span></td></tr>
                        <tr><td>3</td><td>6</td><td><span class="math-content">3 Ã— 2!</span></td></tr>
                        <tr><td>2</td><td>2</td><td><span class="math-content">2 Ã— 1!</span></td></tr>
                        <tr><td>1</td><td>1</td><td>1</td></tr>
                    </table>
                `,
                patternHint: '××™×š ××¤×©×¨ ×œ×—×©×‘ ××ª n! ×× ×× ×—× ×• ×›×‘×¨ ×™×•×“×¢×™× ××ª (n-1)!?',
                patternQuestion: '××” ×”×§×©×¨ ×‘×™×Ÿ <span class="math-content">5!</span> ×œ-<span class="math-content">4!</span>?',
                patternOptions: [
                    { text: '5! = 5 + 4!', correct: false },
                    { text: '5! = 5 Ã— 4!', correct: true },
                    { text: '5! = 5 - 4!', correct: false }
                ],
                baseCaseHint: '××ª×™ ×”×—×™×©×•×‘ ×”×›×™ ×¤×©×•×˜? ××ª×™ ××™×Ÿ ×™×•×ª×¨ ××” ×œ×›×¤×•×œ?',
                baseCaseQuestion: '××” ×”×¢×¨×š ×©×œ 0! ××• 1!?',
                baseCaseAnswer: '1',
                recursiveRelation: '×× ×× ×—× ×• ×™×•×“×¢×™× ××ª (n-1)!, ××– n! = n Ã— (n-1)!',
                recursiveHint: '×›×œ ××¡×¤×¨ ×›×¤×•×œ ×”×¢×¦×¨×ª ×©×œ ×”××¡×¤×¨ ×”×§×˜×Ÿ ××× ×• ×‘-1',
                recursiveQuestion: '××™×š × ×—×©×‘ ××ª factorial(6) ×× ×™×© ×œ× ×• ××ª factorial(5)?',
                recursiveOptions: [
                    { text: 'factorial(6) = 6 + factorial(5)', correct: false },
                    { text: 'factorial(6) = 6 Ã— factorial(5)', correct: true },
                    { text: 'factorial(6) = factorial(5) Ã— factorial(1)', correct: false }
                ],
                formula: 'factorial(n) = n Ã— factorial(n-1)',
                code: `<div class="code-line"><span class="keyword">public static</span> <span class="keyword">int</span> <span class="function">factorial</span>(<span class="keyword">int</span> <span class="parameter">n</span>) {</div>
<div class="code-line">    <span class="comment">// ×ª× ××™ ×¢×¦×™×¨×”</span></div>
<div class="code-line">    <span class="keyword">if</span> (<span class="parameter">n</span> <= <span class="number">1</span>) {</div>
<div class="code-line">        <span class="keyword">return</span> <span class="number">1</span>;</div>
<div class="code-line">    }</div>
<div class="code-line">    <span class="comment">// ×§×¨×™××” ×¨×§×•×¨×¡×™×‘×™×ª</span></div>
<div class="code-line">    <span class="keyword">return</span> <span class="parameter">n</span> * <span class="function">factorial</span>(<span class="parameter">n</span> - <span class="number">1</span>);</div>
<div class="code-line">}</div>`,
                codeExplanation: [
                    '1. ×‘×•×“×§×™× ×ª× ××™ ×¢×¦×™×¨×”: ×× n ×§×˜×Ÿ ××• ×©×•×•×” ×œ-1, ××—×–×™×¨×™× 1',
                    '2. ××—×¨×ª: ××—×–×™×¨×™× n ×›×¤×•×œ ×”×¢×¦×¨×ª ×©×œ n-1',
                    '3. ×”×¤×•× ×§×¦×™×” ×§×•×¨××ª ×œ×¢×¦××” ×¢× ×¢×¨×š ×§×˜×Ÿ ×™×•×ª×¨ ×‘×›×œ ×¤×¢×'
                ],
                testExample: 'factorial(3)',
                testTrace: `
                    <div class="example-box">
                        <div class="example-title">××¢×§×‘ ××—×¨×™ factorial(3):</div>
                        <div style="padding: 15px; direction: ltr; font-family: monospace;">
                            factorial(3)<br>
                            â†’ 3 Ã— factorial(2)<br>
                            â†’ 3 Ã— (2 Ã— factorial(1))<br>
                            â†’ 3 Ã— (2 Ã— 1)<br>
                            â†’ 3 Ã— 2<br>
                            â†’ 6
                        </div>
                    </div>
                `,
                testQuestion: '××” ×™×—×–×™×¨ factorial(4)?',
                testAnswer: '24'
            },
            power: {
                name: '×—×™×©×•×‘ ×—×–×§×”',
                description: '×—×™×©×•×‘ x ×‘×—×–×§×ª n (x^n) - ×›×œ×•××¨ x ×›×¤×•×œ ×¢×¦××• n ×¤×¢××™×.',
                examples: [
                    '<span dir="ltr">2^5 = 2 Ã— 2 Ã— 2 Ã— 2 Ã— 2 = 32</span>',
                    '<span dir="ltr">3^4 = 3 Ã— 3 Ã— 3 Ã— 3 = 81</span>',
                    '<span dir="ltr">5^3 = 5 Ã— 5 Ã— 5 = 125</span>',
                    '<span dir="ltr">7^1 = 7</span>',
                    '<span dir="ltr">x^0 = 1</span> (×œ×›×œ x)'
                ],
                pattern: 'x^n = x Ã— x^(n-1)',
                patternTable: `
                    <table class="pattern-table">
                        <tr><th>×—×–×§×”</th><th>×ª×•×¦××”</th><th>××™×š ××—×©×‘×™×?</th></tr>
                        <tr><td><span class="math-content">2^5</span></td><td>32</td><td><span class="math-content">2 Ã— 2^4</span></td></tr>
                        <tr><td><span class="math-content">2^4</span></td><td>16</td><td><span class="math-content">2 Ã— 2^3</span></td></tr>
                        <tr><td><span class="math-content">2^3</span></td><td>8</td><td><span class="math-content">2 Ã— 2^2</span></td></tr>
                        <tr><td><span class="math-content">2^2</span></td><td>4</td><td><span class="math-content">2 Ã— 2^1</span></td></tr>
                        <tr><td><span class="math-content">2^1</span></td><td>2</td><td><span class="math-content">2 Ã— 2^0</span></td></tr>
                        <tr><td><span class="math-content">2^0</span></td><td>1</td><td>1 (×”×’×“×¨×”)</td></tr>
                    </table>
                `,
                patternHint: '×©×™××• ×œ×‘: ×›×œ ×—×–×§×” ×”×™× ×”×‘×¡×™×¡ ×›×¤×•×œ ×”×—×–×§×” ×”×§×•×“××ª!',
                patternQuestion: '××” ×”×§×©×¨ ×‘×™×Ÿ 3^5 ×œ-3^4?',
                patternOptions: [
                    { text: '3^5 = 3 + 3^4', correct: false },
                    { text: '3^5 = 3 Ã— 3^4', correct: true },
                    { text: '3^5 = 5 Ã— 3^4', correct: false }
                ],
                baseCaseHint: '××ª×™ ×”×—×™×©×•×‘ ×”×›×™ ×¤×©×•×˜? ××” ×§×•×¨×” ×›×©×”××¢×¨×™×š ×”×•× 0?',
                baseCaseQuestion: '××” ×”×¢×¨×š ×©×œ x^0?',
                baseCaseAnswer: '1',
                recursiveRelation: '×× ×× ×—× ×• ×™×•×“×¢×™× ××ª x^(n-1), ××– x^n = x Ã— x^(n-1)',
                recursiveHint: '×›×œ ×—×–×§×” ×”×™× ×”×‘×¡×™×¡ ×›×¤×•×œ ×”×—×–×§×” ×”×§×˜× ×” ××× ×” ×‘-1',
                recursiveQuestion: '××™×š × ×—×©×‘ ××ª power(3,5) ×× ×™×© ×œ× ×• ××ª power(3,4)?',
                recursiveOptions: [
                    { text: 'power(3,5) = 5 Ã— power(3,4)', correct: false },
                    { text: 'power(3,5) = 3 Ã— power(3,4)', correct: true },
                    { text: 'power(3,5) = 3 + power(3,4)', correct: false }
                ],
                formula: 'power(x, n) = x Ã— power(x, n-1)',
                code: `<div class="code-line"><span class="keyword">public static</span> <span class="keyword">int</span> <span class="function">power</span>(<span class="keyword">int</span> <span class="parameter">x</span>, <span class="keyword">int</span> <span class="parameter">n</span>) {</div>
<div class="code-line">    <span class="comment">// ×ª× ××™ ×¢×¦×™×¨×”</span></div>
<div class="code-line">    <span class="keyword">if</span> (<span class="parameter">n</span> == <span class="number">0</span>) {</div>
<div class="code-line">        <span class="keyword">return</span> <span class="number">1</span>;</div>
<div class="code-line">    }</div>
<div class="code-line">    <span class="comment">// ×§×¨×™××” ×¨×§×•×¨×¡×™×‘×™×ª</span></div>
<div class="code-line">    <span class="keyword">return</span> <span class="parameter">x</span> * <span class="function">power</span>(<span class="parameter">x</span>, <span class="parameter">n</span> - <span class="number">1</span>);</div>
<div class="code-line">}</div>`,
                codeExplanation: [
                    '1. ×ª× ××™ ×¢×¦×™×¨×”: ×× n=0, ××—×–×™×¨×™× 1',
                    '2. ××—×¨×ª: ××—×–×™×¨×™× x ×›×¤×•×œ x ×‘×—×–×§×ª n-1',
                    '3. ×”××¢×¨×™×š ×§×˜×Ÿ ×‘-1 ×‘×›×œ ×§×¨×™××”'
                ],
                testExample: 'power(2, 3)',
                testTrace: `
                    <div class="example-box">
                        <div class="example-title">××¢×§×‘ ××—×¨×™ power(2, 3):</div>
                        <div style="padding: 15px; direction: ltr; font-family: monospace;">
                            power(2, 3)<br>
                            â†’ 2 Ã— power(2, 2)<br>
                            â†’ 2 Ã— (2 Ã— power(2, 1))<br>
                            â†’ 2 Ã— (2 Ã— (2 Ã— power(2, 0)))<br>
                            â†’ 2 Ã— (2 Ã— (2 Ã— 1))<br>
                            â†’ 2 Ã— (2 Ã— 2)<br>
                            â†’ 2 Ã— 4<br>
                            â†’ 8
                        </div>
                    </div>
                `,
                testQuestion: '××” ×™×—×–×™×¨ power(3, 3)?',
                testAnswer: '27'
            },
            palindrome: {
                name: '×‘×“×™×§×ª ×¤×œ×™× ×“×¨×•×',
                description: '×¤×œ×™× ×“×¨×•× ×”×•× ××—×¨×•×–×ª ×©× ×§×¨××ª ××•×ª×• ×“×‘×¨ ××”×ª×—×œ×” ×œ×¡×•×£ ×•××”×¡×•×£ ×œ×”×ª×—×œ×”.',
                examples: [
                    '"××‘×" - ×¤×œ×™× ×“×¨×•×',
                    '"×¨×“××¨" - ×¤×œ×™× ×“×¨×•× (radar)',
                    '"level" - ×¤×œ×™× ×“×¨×•×',
                    '"hello" - ×œ× ×¤×œ×™× ×“×¨×•×',
                    '"a" - ×¤×œ×™× ×“×¨×•× (×ª×• ×‘×•×“×“)',
                    '"" - ×¤×œ×™× ×“×¨×•× (××—×¨×•×–×ª ×¨×™×§×”)'
                ],
                pattern: '×¤×œ×™× ×“×¨×•× = ×”×ª×• ×”×¨××©×•×Ÿ ×–×”×” ×œ××—×¨×•×Ÿ, ×•×”×××¦×¢ ×’× ×¤×œ×™× ×“×¨×•×',
                patternTable: `
                    <table class="pattern-table">
                        <tr><th>××—×¨×•×–×ª</th><th>×‘×“×™×§×”</th><th>×ª×•×¦××”</th></tr>
                        <tr><td dir="ltr">"level"</td><td><span dir="ltr">l=l</span> ×•×”×××¦×¢ <span dir="ltr">"eve"</span></td><td>âœ“</td></tr>
                        <tr><td dir="ltr">"eve"</td><td><span dir="ltr">e=e</span> ×•×”×××¦×¢ <span dir="ltr">"v"</span></td><td>âœ“</td></tr>
                        <tr><td dir="ltr">"v"</td><td>×ª×• ×‘×•×“×“</td><td>âœ“</td></tr>
                        <tr><td dir="ltr">"hello"</td><td><span dir="ltr">hâ‰ o</span></td><td>âœ—</td></tr>
                    </table>
                `,
                patternHint: '×‘×•×“×§×™× ××ª ×”×ª×•×•×™× ×‘×§×¦×•×•×ª, ×•××– ×‘×•×“×§×™× ××ª ××” ×©×‘×××¦×¢',
                patternQuestion: '××™×š ×‘×•×“×§×™× ×× "radar" ×”×•× ×¤×œ×™× ×“×¨×•×?',
                patternOptions: [
                    { text: '×‘×•×“×§×™× ×× r=r ×•××– ×‘×•×“×§×™× ××ª "ada"', correct: true },
                    { text: '×‘×•×“×§×™× ×¨×§ ××ª ×”×××¦×¢', correct: false },
                    { text: '×‘×•×“×§×™× ×¨×§ ××ª ×”×§×¦×•×•×ª', correct: false }
                ],
                baseCaseHint: '××ª×™ ××™×Ÿ ×™×•×ª×¨ ××” ×œ×‘×“×•×§? (×¨××–: ××—×¨×•×–×ª ×¨×™×§×” ××• ×ª×• ×‘×•×“×“)',
                baseCaseQuestion: '××ª×™ ××—×¨×•×–×ª ×‘×”×›×¨×— ×¤×œ×™× ×“×¨×•×?',
                baseCaseAnswer: '×¨×™×§×” ××• ×ª×• ×‘×•×“×“',
                recursiveRelation: '×× ×”×§×¦×•×•×ª ×–×”×™×, ×‘×•×“×§×™× ××ª ×”×××¦×¢ ×¨×§×•×¨×¡×™×‘×™×ª',
                recursiveHint: '××©×•×•×™× ×§×¦×•×•×ª ×•×××©×™×›×™× ×œ×‘×“×•×§ ××ª ××” ×©×‘×™× ×™×”×',
                recursiveQuestion: '×× "level" ××ª×—×™×œ ×•××¡×ª×™×™× ×‘-l, ××” × ×‘×“×•×§ ××—×¨ ×›×š?',
                recursiveOptions: [
                    { text: '× ×‘×“×•×§ ××ª "leve"', correct: false },
                    { text: '× ×‘×“×•×§ ××ª "eve"', correct: true },
                    { text: '× ×‘×“×•×§ ××ª "vel"', correct: false }
                ],
                formula: 'isPalindrome(s) = (×¨××©×•×Ÿ == ××—×¨×•×Ÿ) && isPalindrome(×××¦×¢)',
                code: `<div class="code-line"><span class="keyword">public static</span> <span class="keyword">boolean</span> <span class="function">isPalindrome</span>(<span class="keyword">String</span> <span class="parameter">s</span>, <span class="keyword">int</span> <span class="parameter">start</span>, <span class="keyword">int</span> <span class="parameter">end</span>) {</div>
<div class="code-line">    <span class="comment">// ×ª× ××™ ×¢×¦×™×¨×” - × ×©××¨ ×ª×• ××—×“ ××• ×¤×—×•×ª</span></div>
<div class="code-line">    <span class="keyword">if</span> (<span class="parameter">start</span> >= <span class="parameter">end</span>) {</div>
<div class="code-line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div>
<div class="code-line">    }</div>
<div class="code-line">    <span class="comment">// ×‘×•×“×§×™× ×× ×”×§×¦×•×•×ª ×–×”×™×</span></div>
<div class="code-line">    <span class="keyword">if</span> (<span class="parameter">s</span>.charAt(<span class="parameter">start</span>) != <span class="parameter">s</span>.charAt(<span class="parameter">end</span>)) {</div>
<div class="code-line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div>
<div class="code-line">    }</div>
<div class="code-line">    <span class="comment">// ×‘×•×“×§×™× ××ª ×”×××¦×¢ ×¨×§×•×¨×¡×™×‘×™×ª</span></div>
<div class="code-line">    <span class="keyword">return</span> <span class="function">isPalindrome</span>(<span class="parameter">s</span>, <span class="parameter">start</span> + <span class="number">1</span>, <span class="parameter">end</span> - <span class="number">1</span>);</div>
<div class="code-line">}</div>`,
                codeExplanation: [
                    '1. ×× × ×©××¨ ×ª×• ××—×“ ××• ×¤×—×•×ª - ×–×” ×¤×œ×™× ×“×¨×•×',
                    '2. ××©×•×•×™× ××ª ×”×ª×•×•×™× ×‘×§×¦×•×•×ª',
                    '3. ×× ×”× ×–×”×™× - ×‘×•×“×§×™× ××ª ×”×××¦×¢ ×¨×§×•×¨×¡×™×‘×™×ª'
                ],
                testExample: 'isPalindrome("aba", 0, 2)',
                testTrace: `
                    <div class="example-box">
                        <div class="example-title">××¢×§×‘ ××—×¨×™ isPalindrome("aba", 0, 2):</div>
                        <div style="padding: 15px; direction: ltr; font-family: monospace;">
                            isPalindrome("aba", 0, 2)<br>
                            â†’ 'a' == 'a' âœ“<br>
                            â†’ isPalindrome("aba", 1, 1)<br>
                            â†’ start >= end âœ“<br>
                            â†’ true
                        </div>
                    </div>
                `,
                testQuestion: '××” ×™×—×–×™×¨ isPalindrome("dad", 0, 2)?',
                testAnswer: 'true'
            },
            countDigits: {
                name: '×¡×¤×™×¨×ª ×¡×¤×¨×•×ª',
                description: '×¡×¤×™×¨×ª ××¡×¤×¨ ×”×¡×¤×¨×•×ª ×‘××¡×¤×¨ ×©×œ× ×—×™×•×‘×™.',
                examples: [
                    '<span dir="ltr">1234</span> â† 4 ×¡×¤×¨×•×ª',
                    '<span dir="ltr">567</span> â† 3 ×¡×¤×¨×•×ª',
                    '<span dir="ltr">89</span> â† 2 ×¡×¤×¨×•×ª',
                    '<span dir="ltr">5</span> â† ×¡×¤×¨×” ××—×ª',
                    '<span dir="ltr">0</span> â† ×¡×¤×¨×” ××—×ª'
                ],
                pattern: '××¡×¤×¨ ×”×¡×¤×¨×•×ª = 1 + ××¡×¤×¨ ×”×¡×¤×¨×•×ª ××—×¨×™ ×—×œ×•×§×” ×‘-10',
                patternTable: `
                    <table class="pattern-table">
                        <tr><th>××¡×¤×¨</th><th>××—×¨×™ ×—×œ×•×§×” ×‘-10</th><th>×¡×¤×¨×•×ª</th></tr>
                        <tr><td>1234</td><td>123</td><td><span dir="rtl">1 + ×¡×¤×¨×•×ª(123)</span></td></tr>
                        <tr><td>123</td><td>12</td><td><span dir="rtl">1 + ×¡×¤×¨×•×ª(12)</span></td></tr>
                        <tr><td>12</td><td>1</td><td><span dir="rtl">1 + ×¡×¤×¨×•×ª(1)</span></td></tr>
                        <tr><td>1</td><td>0</td><td>1</td></tr>
                    </table>
                `,
                patternHint: '×›×©××—×œ×§×™× ×‘-10, "××•×¨×™×“×™×" ×¡×¤×¨×” ××—×ª',
                patternQuestion: '×›××” ×¡×¤×¨×•×ª ×™×© ×‘-567 ×× ×‘-56 ×™×© 2 ×¡×¤×¨×•×ª?',
                patternOptions: [
                    { text: '2 ×¡×¤×¨×•×ª', correct: false },
                    { text: '3 ×¡×¤×¨×•×ª', correct: true },
                    { text: '4 ×¡×¤×¨×•×ª', correct: false }
                ],
                baseCaseHint: '××” ×§×•×¨×” ×›×©×”××¡×¤×¨ ×§×˜×Ÿ ×-10?',
                baseCaseQuestion: '×›××” ×¡×¤×¨×•×ª ×‘××¡×¤×¨ ×—×“-×¡×¤×¨×ª×™?',
                baseCaseAnswer: '1',
                recursiveRelation: 'countDigits(n) = 1 + countDigits(n/10)',
                recursiveHint: '×›×œ ××¡×¤×¨ = ×¡×¤×¨×” ××—×ª + ×”×¡×¤×¨×•×ª ×©×œ ×”××¡×¤×¨ ×‘×œ×™ ×”×¡×¤×¨×” ×”××—×¨×•× ×”',
                recursiveQuestion: '×× ×‘-123 ×™×© 3 ×¡×¤×¨×•×ª, ×›××” ×™×© ×‘-1234?',
                recursiveOptions: [
                    { text: '3 ×¡×¤×¨×•×ª', correct: false },
                    { text: '4 ×¡×¤×¨×•×ª', correct: true },
                    { text: '5 ×¡×¤×¨×•×ª', correct: false }
                ],
                formula: 'countDigits(n) = 1 + countDigits(n/10)',
                code: `<div class="code-line"><span class="keyword">public static</span> <span class="keyword">int</span> <span class="function">countDigits</span>(<span class="keyword">int</span> <span class="parameter">n</span>) {</div>
<div class="code-line">    <span class="comment">// ×ª× ××™ ×¢×¦×™×¨×” - ××¡×¤×¨ ×—×“-×¡×¤×¨×ª×™</span></div>
<div class="code-line">    <span class="keyword">if</span> (<span class="parameter">n</span> < <span class="number">10</span>) {</div>
<div class="code-line">        <span class="keyword">return</span> <span class="number">1</span>;</div>
<div class="code-line">    }</div>
<div class="code-line">    <span class="comment">// ×§×¨×™××” ×¨×§×•×¨×¡×™×‘×™×ª</span></div>
<div class="code-line">    <span class="keyword">return</span> <span class="number">1</span> + <span class="function">countDigits</span>(<span class="parameter">n</span> / <span class="number">10</span>);</div>
<div class="code-line">}</div>`,
                codeExplanation: [
                    '1. ×× ×”××¡×¤×¨ ×§×˜×Ÿ ×-10, ×™×© ×‘×• ×¡×¤×¨×” ××—×ª',
                    '2. ××—×¨×ª: ×¡×•×¤×¨×™× ×¡×¤×¨×” ××—×ª + ×”×¡×¤×¨×•×ª ×©×œ n/10',
                    '3. ×—×œ×•×§×” ×‘-10 "××•×¨×™×“×”" ××ª ×”×¡×¤×¨×” ×”××—×¨×•× ×”'
                ],
                testExample: 'countDigits(456)',
                testTrace: `
                    <div class="example-box">
                        <div class="example-title">××¢×§×‘ ××—×¨×™ countDigits(456):</div>
                        <div style="padding: 15px; direction: ltr; font-family: monospace;">
                            countDigits(456)<br>
                            â†’ 1 + countDigits(45)<br>
                            â†’ 1 + (1 + countDigits(4))<br>
                            â†’ 1 + (1 + 1)<br>
                            â†’ 1 + 2<br>
                            â†’ 3
                        </div>
                    </div>
                `,
                testQuestion: '××” ×™×—×–×™×¨ countDigits(9876)?',
                testAnswer: '4'
            },
            reverseString: {
                name: '×”×™×¤×•×š ××—×¨×•×–×ª',
                description: '×”×™×¤×•×š ×¡×“×¨ ×”×ª×•×•×™× ×‘××—×¨×•×–×ª.',
                examples: [
                    '"hello" â†’ "olleh"',
                    '"abc" â†’ "cba"',
                    '"a" â†’ "a"',
                    '"" â†’ ""'
                ],
                pattern: '×”×™×¤×•×š = ×”×ª×• ×”××—×¨×•×Ÿ + ×”×™×¤×•×š ×”×©××¨',
                patternTable: `
                    <table class="pattern-table">
                        <tr><th>××—×¨×•×–×ª</th><th>×ª×• ××—×¨×•×Ÿ</th><th>×”×™×¤×•×š</th></tr>
                        <tr><td dir="ltr">"hello"</td><td dir="ltr">'o'</td><td><span dir="ltr">'o' + reverse("hell")</span></td></tr>
                        <tr><td dir="ltr">"hell"</td><td dir="ltr">'l'</td><td><span dir="ltr">'l' + reverse("hel")</span></td></tr>
                        <tr><td dir="ltr">"hel"</td><td dir="ltr">'l'</td><td><span dir="ltr">'l' + reverse("he")</span></td></tr>
                        <tr><td dir="ltr">"he"</td><td dir="ltr">'e'</td><td><span dir="ltr">'e' + reverse("h")</span></td></tr>
                        <tr><td dir="ltr">"h"</td><td dir="ltr">'h'</td><td dir="ltr">"h"</td></tr>
                    </table>
                `,
                patternHint: '×œ×•×§×—×™× ××ª ×”×ª×• ×”××—×¨×•×Ÿ ×•××•×¡×™×¤×™× ××ª ×”×™×¤×•×š ×”×©××¨',
                patternQuestion: '××™×š ×”×•×¤×›×™× ××ª "cat"?',
                patternOptions: [
                    { text: '"c" + ×”×™×¤×•×š ×©×œ "at"', correct: false },
                    { text: '"t" + ×”×™×¤×•×š ×©×œ "ca"', correct: true },
                    { text: '"a" + ×”×™×¤×•×š ×©×œ "ct"', correct: false }
                ],
                baseCaseHint: '××” ×§×•×¨×” ×›×©×”××—×¨×•×–×ª ×¨×™×§×” ××• ×¢× ×ª×• ××—×“?',
                baseCaseQuestion: '××” ×”×”×™×¤×•×š ×©×œ ××—×¨×•×–×ª ×¨×™×§×”?',
                baseCaseAnswer: '×¨×™×§×”',
                recursiveRelation: 'reverse(s) = lastChar + reverse(rest)',
                recursiveHint: '×”×ª×• ×”××—×¨×•×Ÿ ×¢×•×‘×¨ ×œ×”×ª×—×œ×”, ×•×”×©××¨ ××ª×”×¤×š',
                recursiveQuestion: '×× reverse("ab") = "ba", ××” ×™×”×™×” reverse("cab")?',
                recursiveOptions: [
                    { text: '"abc"', correct: false },
                    { text: '"bac"', correct: true },
                    { text: '"cab"', correct: false }
                ],
                formula: 'reverse(s) = s.charAt(n-1) + reverse(s.substring(0, n-1))',
                code: `<div class="code-line"><span class="keyword">public static</span> <span class="keyword">String</span> <span class="function">reverse</span>(<span class="keyword">String</span> <span class="parameter">s</span>) {</div>
<div class="code-line">    <span class="comment">// ×ª× ××™ ×¢×¦×™×¨×” - ××—×¨×•×–×ª ×¨×™×§×” ××• ×ª×• ×‘×•×“×“</span></div>
<div class="code-line">    <span class="keyword">if</span> (<span class="parameter">s</span>.length() <= <span class="number">1</span>) {</div>
<div class="code-line">        <span class="keyword">return</span> <span class="parameter">s</span>;</div>
<div class="code-line">    }</div>
<div class="code-line">    <span class="comment">// ×§×¨×™××” ×¨×§×•×¨×¡×™×‘×™×ª</span></div>
<div class="code-line">    <span class="keyword">return</span> <span class="parameter">s</span>.charAt(<span class="parameter">s</span>.length() - <span class="number">1</span>) + </div>
<div class="code-line">           <span class="function">reverse</span>(<span class="parameter">s</span>.substring(<span class="number">0</span>, <span class="parameter">s</span>.length() - <span class="number">1</span>));</div>
<div class="code-line">}</div>`,
                codeExplanation: [
                    '1. ×× ×”××—×¨×•×–×ª ×¨×™×§×” ××• ×¢× ×ª×• ××—×“ - ××—×–×™×¨×™× ××•×ª×”',
                    '2. ××—×¨×ª: ×”×ª×• ×”××—×¨×•×Ÿ + ×”×™×¤×•×š ×©×œ ×”×©××¨',
                    '3. substring ××—×–×™×¨ ××ª ×”××—×¨×•×–×ª ×‘×œ×™ ×”×ª×• ×”××—×¨×•×Ÿ'
                ],
                testExample: 'reverse("dog")',
                testTrace: `
                    <div class="example-box">
                        <div class="example-title">××¢×§×‘ ××—×¨×™ reverse("dog"):</div>
                        <div style="padding: 15px; direction: ltr; font-family: monospace;">
                            reverse("dog")<br>
                            â†’ 'g' + reverse("do")<br>
                            â†’ 'g' + ('o' + reverse("d"))<br>
                            â†’ 'g' + ('o' + "d")<br>
                            â†’ 'g' + "od"<br>
                            â†’ "god"
                        </div>
                    </div>
                `,
                testQuestion: '××” ×™×—×–×™×¨ reverse("abc")?',
                testAnswer: 'cba'
            }
        };
        
        // Global variables
        let currentProblem = 'factorial';
        let currentStepNum = 1;
        let userProgress = {};
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            selectProblem('factorial');
        });
        
        // Problem selection
        function selectProblem(problemKey) {
            currentProblem = problemKey;
            currentStepNum = 1;
            userProgress = {};
            
            // Update UI
            document.querySelectorAll('.problem-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Reset steps
            for (let i = 1; i <= 6; i++) {
                document.getElementById(`step${i}`).classList.remove('active', 'completed');
                document.getElementById(`content${i}`).classList.remove('active');
            }
            document.getElementById('step1').classList.add('active');
            document.getElementById('content1').classList.add('active');
            
            // Update navigation
            document.getElementById('prevBtn').disabled = true;
            document.getElementById('nextBtn').disabled = false;
            document.getElementById('nextBtn').textContent = '×”×‘× â†’';
            
            // Load problem content
            loadProblemContent();
        }
        
        function loadProblemContent() {
            const problem = problems[currentProblem];
            
            // Step 1: Understanding
            document.getElementById('problemDescription').innerHTML = `
                <h3>${problem.name}</h3>
                <p>${problem.description}</p>
            `;
            
            document.getElementById('problemExamples').innerHTML = 
                problem.examples.map(ex => `<div>â€¢ ${ex}</div>`).join('');
            
            // Step 2: Pattern
            document.getElementById('patternExplanation').innerHTML = `
                <p>×‘×•××• × ×¡×ª×›×œ ×¢×œ ×“×•×’×××•×ª ×•× ×—×¤×© ×“×¤×•×¡:</p>
            `;
            document.getElementById('patternTable').innerHTML = problem.patternTable;
            document.getElementById('patternHint').textContent = problem.patternHint;
            document.getElementById('patternQuestion').textContent = problem.patternQuestion;
            
            const patternOptions = document.getElementById('patternOptions');
            patternOptions.innerHTML = '';
            problem.patternOptions.forEach((option, index) => {
                const div = document.createElement('div');
                div.className = 'option';
                div.innerHTML = `<span class="math-content">${option.text}</span>`;
                div.onclick = () => checkPattern(index);
                patternOptions.appendChild(div);
            });
            
            // Step 3: Base Case
            document.getElementById('baseCaseHint').textContent = problem.baseCaseHint;
            document.getElementById('baseCaseQuestion').textContent = problem.baseCaseQuestion;
            document.getElementById('baseCaseInput').value = '';
            
            // Step 4: Recursive Relation
            document.getElementById('recursiveRelation').innerHTML = `<p>${problem.recursiveRelation}</p>`;
            document.getElementById('formulaDisplay').textContent = problem.formula;
            document.getElementById('recursiveHint').textContent = problem.recursiveHint;
            document.getElementById('recursiveQuestion').textContent = problem.recursiveQuestion;
            
            const recursiveOptions = document.getElementById('recursiveOptions');
            recursiveOptions.innerHTML = '';
            problem.recursiveOptions.forEach((option, index) => {
                const div = document.createElement('div');
                div.className = 'option';
                div.innerHTML = `<span class="math-content">${option.text}</span>`;
                div.onclick = () => checkRecursive(index);
                recursiveOptions.appendChild(div);
            });
            
            // Step 5: Code
            document.getElementById('finalCode').innerHTML = problem.code;
            
            // Add line numbers
            const codeLines = document.querySelectorAll('#finalCode .code-line');
            codeLines.forEach((line, index) => {
                const lineNum = document.createElement('span');
                lineNum.style.cssText = 'color: #5c6370; margin-left: 10px; padding-left: 5px; border-left: 1px solid #3e4451; display: inline-block; width: 25px; text-align: left; user-select: none;';
                lineNum.textContent = (index + 1).toString().padStart(2, ' ');
                line.prepend(lineNum);
            });
            
            document.getElementById('codeExplanation').innerHTML = 
                problem.codeExplanation.map(exp => `<div>â€¢ ${exp}</div>`).join('');
            
            // Step 6: Testing
            document.getElementById('testTrace').innerHTML = problem.testTrace;
            document.getElementById('testQuestion').innerHTML = `<strong>${problem.testQuestion}</strong>`;
            document.getElementById('testInput').value = '';
            
            // Clear feedbacks
            document.querySelectorAll('.feedback').forEach(fb => {
                fb.classList.remove('show', 'correct', 'incorrect');
                fb.textContent = '';
            });
        }
        
        // Step navigation
        function nextStep() {
            if (currentStepNum < 6) {
                // Mark current step as completed
                document.getElementById(`step${currentStepNum}`).classList.remove('active');
                document.getElementById(`step${currentStepNum}`).classList.add('completed');
                document.getElementById(`content${currentStepNum}`).classList.remove('active');
                
                // Move to next step
                currentStepNum++;
                document.getElementById(`step${currentStepNum}`).classList.add('active');
                document.getElementById(`content${currentStepNum}`).classList.add('active');
                
                // Update navigation
                document.getElementById('prevBtn').disabled = false;
                if (currentStepNum === 6) {
                    document.getElementById('nextBtn').textContent = '×¡×™×™× âœ…';
                }
            } else {
                // Show success message
                document.getElementById('successMessage').classList.add('show');
                document.getElementById('nextBtn').disabled = true;
            }
        }
        
        function previousStep() {
            if (currentStepNum > 1) {
                // Remove active from current step
                document.getElementById(`step${currentStepNum}`).classList.remove('active');
                document.getElementById(`content${currentStepNum}`).classList.remove('active');
                
                // Move to previous step
                currentStepNum--;
                document.getElementById(`step${currentStepNum}`).classList.remove('completed');
                document.getElementById(`step${currentStepNum}`).classList.add('active');
                document.getElementById(`content${currentStepNum}`).classList.add('active');
                
                // Update navigation
                if (currentStepNum === 1) {
                    document.getElementById('prevBtn').disabled = true;
                }
                document.getElementById('nextBtn').disabled = false;
                document.getElementById('nextBtn').textContent = '×”×‘× â†’';
                
                // Hide success message if visible
                document.getElementById('successMessage').classList.remove('show');
            }
        }
        
        // Interactive checks
        function confirmUnderstanding(understood) {
            const feedback = document.getElementById('understandingFeedback');
            if (understood) {
                feedback.textContent = 'âœ… ××¦×•×™×Ÿ! ×‘×•××• × ××©×™×š ×œ×©×œ×‘ ×”×‘×.';
                feedback.className = 'feedback correct show';
                setTimeout(() => nextStep(), 1500);
            } else {
                feedback.textContent = 'ğŸ“– ×§×¨××• ×©×•×‘ ××ª ×”×”×¡×‘×¨ ×•×”×“×•×’×××•×ª. ×—×©×•×‘ ×œ×”×‘×™×Ÿ ××ª ×”×‘×¢×™×” ×œ×¤× ×™ ×©×××©×™×›×™×!';
                feedback.className = 'feedback incorrect show';
            }
        }
        
        function checkPattern(index) {
            const problem = problems[currentProblem];
            const options = document.querySelectorAll('#patternOptions .option');
            const feedback = document.getElementById('patternFeedback');
            
            options[index].classList.add('selected');
            
            if (problem.patternOptions[index].correct) {
                options[index].classList.add('correct');
                feedback.textContent = 'âœ… × ×›×•×Ÿ! ×–×™×”×™×ª ××ª ×”×“×¤×•×¡ ×”×¨×§×•×¨×¡×™×‘×™!';
                feedback.className = 'feedback correct show';
                userProgress.patternCompleted = true;
                setTimeout(() => {
                    if (confirm('××¢×•×œ×”! ×¨×•×¦×” ×œ×”××©×™×š ×œ×©×œ×‘ ×”×‘×?')) {
                        nextStep();
                    }
                }, 1500);
            } else {
                options[index].classList.add('incorrect');
                feedback.textContent = 'âŒ ×œ× ×‘×“×™×•×§. ×—×©×‘×• ×©×•×‘ ×¢×œ ×”×§×©×¨ ×‘×™×Ÿ ×”×‘×¢×™×” ×”×’×“×•×œ×” ×œ×§×˜× ×”.';
                feedback.className = 'feedback incorrect show';
                setTimeout(() => {
                    options[index].classList.remove('selected', 'incorrect');
                }, 2000);
            }
        }
        
        function checkBaseCase() {
            const problem = problems[currentProblem];
            const input = document.getElementById('baseCaseInput').value.trim();
            const feedback = document.getElementById('baseCaseFeedback');
            
            if (input.toLowerCase() === problem.baseCaseAnswer.toLowerCase() || 
                (problem.baseCaseAnswer.includes('××•') && 
                 problem.baseCaseAnswer.toLowerCase().includes(input.toLowerCase()))) {
                feedback.textContent = 'âœ… ××¦×•×™×Ÿ! ×–×™×”×™×ª × ×›×•×Ÿ ××ª ×ª× ××™ ×”×¢×¦×™×¨×”!';
                feedback.className = 'feedback correct show';
                userProgress.baseCaseCompleted = true;
                setTimeout(() => {
                    if (confirm('×™×•×¤×™! ×‘×•××• × ××©×™×š ×œ×©×œ×‘ ×”×‘×.')) {
                        nextStep();
                    }
                }, 1500);
            } else {
                feedback.textContent = 'âŒ × ×¡×” ×©×•×‘. ×—×©×•×‘ ×¢×œ ×”××§×¨×” ×”×¤×©×•×˜ ×‘×™×•×ª×¨.';
                feedback.className = 'feedback incorrect show';
            }
        }
        
        function checkRecursive(index) {
            const problem = problems[currentProblem];
            const options = document.querySelectorAll('#recursiveOptions .option');
            const feedback = document.getElementById('recursiveFeedback');
            
            options[index].classList.add('selected');
            
            if (problem.recursiveOptions[index].correct) {
                options[index].classList.add('correct');
                feedback.textContent = 'âœ… ××“×•×™×§! ×”×‘× ×ª ××ª ×”×§×©×¨ ×”×¨×§×•×¨×¡×™×‘×™!';
                feedback.className = 'feedback correct show';
                userProgress.recursiveCompleted = true;
                setTimeout(() => {
                    if (confirm('××¢×•×œ×”! ×¢×›×©×™×• × ×›×ª×•×‘ ××ª ×”×§×•×“.')) {
                        nextStep();
                    }
                }, 1500);
            } else {
                options[index].classList.add('incorrect');
                feedback.textContent = 'âŒ ×œ× ××“×•×™×§. ×—×©×‘×• ××™×š ×”×ª×•×¦××” ×©×œ ×”×‘×¢×™×” ×”×§×˜× ×” ×¢×•×–×¨×ª ×œ×¤×ª×•×¨ ××ª ×”×’×“×•×œ×”.';
                feedback.className = 'feedback incorrect show';
                setTimeout(() => {
                    options[index].classList.remove('selected', 'incorrect');
                }, 2000);
            }
        }
        
        function checkTest() {
            const problem = problems[currentProblem];
            const input = document.getElementById('testInput').value.trim();
            const feedback = document.getElementById('testFeedback');
            
            if (input === problem.testAnswer) {
                feedback.textContent = 'âœ… ××¦×•×™×Ÿ! ×”×‘× ×ª ××™×š ×”×¤×•× ×§×¦×™×” ×¢×•×‘×“×ª!';
                feedback.className = 'feedback correct show';
                document.getElementById('successMessage').classList.add('show');
            } else {
                feedback.textContent = 'âŒ × ×¡×” ×©×•×‘. ×¢×§×•×‘ ××—×¨×™ ×”×“×•×’××” ×œ××¢×œ×”.';
                feedback.className = 'feedback incorrect show';
            }
        }
    </script>
</body>
</html>
